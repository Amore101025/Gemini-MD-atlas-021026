You are an expert prompt engineer tasked with creating a comprehensive prompt for Google's OPAL (or similar AI app builder) to generate a sophisticated medical device regulatory article management application with AI capabilities.

Here is the article content that will be the foundation of the application:

<article_content>
{{ARTICLE_CONTENT}}
</article_content>

Here is the user's specific request for the application:

<user_request>
{{USER_REQUEST}}
</user_request>

Your task is to create a detailed, structured prompt that OPAL/Google can use to build this application. The prompt must be comprehensive enough that an AI system can understand all requirements and generate a functional application.

<scratchpad>
Before writing the prompt, analyze the requirements:

1. Core Functionality:
   - Article editing (markdown and text view)
   - File operations (upload/download)
   - 6 interactive WOW graphs based on article content
   
2. AI Features Required:
   - Model selection (gemini-2.5-flash, gemini-3-flash-preview)
   - Article prompting/querying capability
   - 6 AI Magic features including AI Keywords with color selection
   - Article improvement and expansion agent
   
3. UI/UX Requirements:
   - Light/dark theme toggle
   - English/Traditional Chinese language support
   - 20 painter-inspired styles with Jackpot random selector
   - WOW status indicators
   - Interactive dashboard
   
4. Technical Considerations:
   - Need to parse and understand the medical regulatory article
   - Graph generation must be contextually relevant
   - AI interactions must be model-agnostic
   - Multi-language support for complex technical content

Now structure the prompt logically with clear sections.
</scratchpad>

Write a comprehensive prompt for OPAL/Google AI app builder with the following structure:

**SECTION 1: APPLICATION OVERVIEW**
- Define the application name: "MedTech Regulatory AI Assistant"
- State the primary purpose: An intelligent article management and analysis system for medical device regulatory content
- Specify the target users: C-Suite MedTech Executives, Regulatory Affairs Directors, QA/RA Professionals

**SECTION 2: CORE ARTICLE MANAGEMENT FEATURES**

Specify these requirements:
- Dual editing modes: Markdown editor and rich text editor with seamless switching
- File operations: Upload (support .md, .txt, .docx formats) and download (export as .md, .pdf, .docx)
- Version control: Auto-save functionality with timestamp
- The default article content should be the medical device regulatory outlook article provided
- Word count display and reading time estimate

**SECTION 3: INTERACTIVE GRAPH GENERATION**

The system must automatically generate 6 interactive "WOW graphs" based on the article content:

1. **Regulatory Timeline Visualization**: Interactive timeline showing all deadlines and milestones from the article
2. **Global Compliance Heat Map**: World map showing regulatory intensity by region
3. **AI Risk Classification Matrix**: Interactive comparison chart (EU vs US approaches)
4. **Technology Integration Network**: Node graph showing relationships between AI/ML concepts, regulations, and stakeholders
5. **Compliance Checklist Progress**: Dynamic dashboard showing implementation phases
6. **Regulatory Burden Analysis**: Comparative bar/radar charts showing complexity across regions

Each graph must:
- Be interactive (hover tooltips, clickable elements, zoom/pan)
- Update dynamically when article content changes
- Be exportable as PNG/SVG
- Include data source citations from the article
- Have smooth animations and transitions

**SECTION 4: AI AGENT CAPABILITIES**

**4A: Model Selection Interface**
- Dropdown menu to select between: gemini-2.5-flash, gemini-3-flash-preview
- Display model capabilities and speed/quality tradeoffs
- Show current token usage and estimated cost

**4B: Article Prompting Feature**
- Chat interface where users can ask questions about the article
- The AI should reference specific sections and provide citations
- Support follow-up questions with conversation history
- Example prompts: "Summarize EU MDR requirements", "What are the key 2026 deadlines?", "Compare US and EU AI regulations"

**4C: Six AI Magic Features**

Create these 6 AI-powered tools:

1. **AI Keywords**: User inputs keywords → AI highlights them throughout the article with user-selected colors (color picker interface). Also generates related terms and concept clusters.

2. **Smart Summarizer**: Generates executive summaries at different lengths (tweet, paragraph, one-page) with adjustable technical depth.

3. **Regulatory Gap Analyzer**: User inputs their current compliance status → AI identifies gaps and provides prioritized action items.

4. **Citation Generator**: Automatically formats references in multiple styles (APA, IEEE, regulatory format) and creates bibliography.

5. **Translation Optimizer**: Beyond basic translation, adapts regulatory terminology correctly for Traditional Chinese with context awareness.

6. **Trend Predictor**: Analyzes the article content to predict future regulatory developments and generates "what-if" scenarios.

**4D: Article Improvement Agent**
- Separate interface for article enhancement
- Options: "Expand section", "Add technical depth", "Simplify language", "Add examples", "Update with latest info"
- Model selection available
- Shows before/after comparison
- User can accept/reject changes with granular control

**SECTION 5: WOW UI/UX DESIGN**

**5A: Theme System**
- Light/Dark mode toggle with smooth transition animation
- Themes should affect graphs, editor, and all UI elements
- High contrast mode for accessibility

**5B: Language Support**
- English/Traditional Chinese toggle
- All UI elements, tooltips, and system messages must be bilingual
- Technical terms should show original English in parentheses when in Chinese mode
- Right-to-left layout adjustments where appropriate

**5C: 20 Painter-Inspired Styles**

Create visual themes inspired by these painters (suggest specific painters like Monet, Van Gogh, Kandinsky, Hokusai, Rothko, Mondrian, Klimt, Pollock, O'Keeffe, Picasso, Matisse, Dalí, Warhol, Basquiat, Kahlo, Caravaggio, Turner, Vermeer, Hiroshige, Mucha):

- Each style should influence: color palette, typography, graph aesthetics, spacing, and decorative elements
- "Jackpot" button: Randomly selects a style with slot-machine animation
- Style preview thumbnails
- Smooth transitions between styles (2-3 second animation)

**5D: Status Indicators**
- Real-time indicators for: AI processing, file operations, auto-save status, model availability, token usage
- Use engaging animations (pulsing, progress rings, particle effects)
- Color-coded system: green (ready), blue (processing), yellow (warning), red (error)

**5E: Interactive Dashboard**

Create a main dashboard showing:
- Article statistics (word count, reading time, last modified)
- Quick access to all 6 graphs (thumbnail previews)
- Recent AI interactions history
- Compliance checklist progress (if user has used Gap Analyzer)
- Quick action buttons for common tasks
- Notification center for system updates

**SECTION 6: TECHNICAL SPECIFICATIONS**

- Framework: Use modern web technologies (React/Vue.js recommended)
- AI Integration: Google Gemini API with proper error handling and rate limiting
- Graph Library: D3.js or similar for interactive visualizations
- Editor: Use a robust markdown editor library with live preview
- Responsive design: Must work on desktop, tablet, and mobile
- Performance: Lazy loading for graphs, debounced AI calls, optimized rendering
- Security: Secure API key management, input sanitization, XSS protection

**SECTION 7: USER FLOW**

1. User lands on dashboard with default article loaded
2. Can immediately see 6 generated graphs
3. Can switch to editor to modify article
4. Can open AI chat to ask questions
5. Can access AI Magic features from toolbar
6. Can customize appearance (theme, language, style)
7. Can export work (article + graphs)

**SECTION 8: OUTPUT REQUIREMENTS**

Generate complete application code including:
- HTML structure
- CSS styling (with all theme variations)
- JavaScript functionality
- API integration code
- Configuration files
- README with setup instructions

Ensure the application is:
- Fully functional out-of-the-box
- Well-commented code
- Modular and maintainable
- Accessible (WCAG 2.1 AA compliant)
- Performant (< 3 second initial load)

The application should embody a "WOW" factor through:
- Delightful micro-interactions
- Smooth, purposeful animations
- Intelligent AI assistance that genuinely helps users
- Beautiful, functional data visualizations
- Intuitive, discoverable interface

Write your complete OPAL/Google prompt inside <opal_prompt> tags. The prompt should be detailed enough that an AI system can generate a working application. Include specific technical requirements, UI mockup descriptions, example code snippets where helpful, and clear acceptance criteria. Your prompt should be comprehensive, well-organized, and actionable.
